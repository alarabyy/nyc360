<nav class="nav-wrapper">
  
  <div class="top-nav">
    
    <div class="nav-start">
      <button class="mobile-toggle d-lg-none" (click)="toggleMenu()">
        <i class="bi bi-list"></i>
      </button>
      
      <a routerLink="/" class="logo-area">
        <img src="image_0_0.jpg" alt="NYC360" class="logo-img"> 
      </a>
    </div>

    <div class="nav-center d-none d-lg-block">
      <div class="search-bar-purple">
        <i class="bi bi-search search-icon"></i>
        <input type="text" placeholder="Search in NYC360..." />
      </div>
    </div>

    <div class="nav-end">
      
      <ng-container *ngIf="isLoggedIn; else loginTemplate">
        <button class="notification-btn">
          <i class="bi bi-bell-fill"></i>
          <span *ngIf="hasNotifications" class="notification-dot"></span>
        </button>

        <a [routerLink]="['/public/profile', currentUsername]" class="user-profile-link" title="Profile">
          <i class="bi bi-person-circle profile-icon" style="font-size: 1.8rem;"></i>
        </a>
      </ng-container>
      
      <ng-template #loginTemplate>
        <a routerLink="/auth/login" class="btn-login-text">Login</a>
        <a routerLink="/auth/register-selection" class="btn-signup-blue">Sign Up</a>
      </ng-template>

    </div>
  </div>

  <div class="categories-nav">
    <div class="cat-scroller">
      <a *ngFor="let cat of categories" 
         [routerLink]="[cat.route]" 
         routerLinkActive="active-cat-blue"
         class="cat-pill-grey">
         <i [class]="'bi ' + cat.icon"></i>
         <span>{{ cat.name }}</span>
      </a>
    </div>
  </div>

</nav>

<div class="sidebar-overlay" [class.show]="isMenuOpen" (click)="toggleMenu()"></div>

<div class="sidebar-menu" [class.open]="isMenuOpen">
  <div class="sidebar-header">
    <span class="brand">NYC<span>360</span></span>
    <button class="close-btn" (click)="toggleMenu()"><i class="bi bi-x-lg"></i></button>
  </div>

  <div class="sidebar-content">
    
    <div class="mobile-search-purple">
      <i class="bi bi-search"></i>
      <input type="text" placeholder="Search...">
    </div>

    <div *ngIf="isLoggedIn" class="mobile-user-info" [routerLink]="['/profile', currentUsername]" (click)="toggleMenu()" style="cursor: pointer;">
      <i class="bi bi-person-circle" style="font-size: 2rem; margin-right: 10px;"></i>
      <span class="username">Hi, {{ currentUsername }}</span>
    </div>

    <p class="menu-label">Categories</p>
    <div class="mobile-categories-grid">
      <a *ngFor="let cat of categories" 
         [routerLink]="[cat.route]" 
         (click)="toggleMenu()"
         routerLinkActive="active-mobile-cat"
         class="mobile-cat-item">
        <i [class]="'bi ' + cat.icon"></i> {{ cat.name }}
      </a>
    </div>

    <div class="mobile-actions">
      <button *ngIf="isLoggedIn" (click)="logout()" class="btn-logout-mobile">Logout</button>
      <ng-container *ngIf="!isLoggedIn">
          <a routerLink="/auth/login" (click)="toggleMenu()" class="btn-login-mobile">Login</a>
          <a routerLink="/auth/register-selection" (click)="toggleMenu()" class="btn-signup-mobile">Sign Up</a>
      </ng-container>
    </div>

  </div>
</div>